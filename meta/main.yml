---
galaxy_info:
  role_name: aws_fpga
  author: Accelize
  description: 'This Ansible role install the AWS FPGA runtimes for F1
                instances.'
  company: Accelize
  license: Apache License 2.0
  min_ansible_version: '2.8'
  platforms:
    - name: EL
      versions:
        - 7
    - name: Ubuntu
      versions:
        - xenial
        - bionic
  galaxy_tags:
    - system
    - cloud
    - fpga
    - aws
    - amazon
    - ec2

dependencies:
  - role: accelize.linux_kernel
    vars:
      kernel_version: "{{ aws_linux_kernel_version }}"
    when:
      # Managed by "accelize.xilinx_xrt" if not RHEL/CentOS 7
      - ansible_os_family == 'RedHat'
      - ansible_distribution_major_version == "7"
      - xilinx_xrt_ensure_compatible_kernel | bool

  - role: accelize.xilinx_xrt
    when:
      - aws_fpga_xrt | bool
      # AWS provides special packages for RHEL/CentOS 7
      - "ansible_os_family != 'RedHat' or
         ansible_distribution_major_version != '7'"
    vars:
      xilinx_xrt_aws: true
